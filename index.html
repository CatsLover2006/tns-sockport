<!DOCTYPE html>
<html lang="en" manifest="manifest.appcache">
<title>&#8290;</title>
<meta charset="utf-8">
<!-- UI Properties -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" type="text/css" href="root/css/all.css">
<!-- iOS App Properties -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" href="root/img/ios-icon.png">
<script>
window.onerror = function(ev)
{
    alert('Uncaught error: ' + ev);
};

window.onload = function()
{
    let x = document.getElementById("date");
    // device detection code from https://github.com/joyqi/mobile-device-js
    let canvas = document.createElement('canvas');
    let gl = canvas.getContext('experimental-webgl');
    let debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
    let glRenderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
    x.innerHTML = glRenderer;
    let result = glRenderer.match(/Apple A10/);
    if (result)
    {
        document.title = 'Incompatible Spyware';
        var body = document.body;
        while(body.firstChild)
        {
            body.removeChild(body.firstChild);
        }
        var center = document.createElement('div');
        center.className = 'center';
        center.appendChild(document.createElement('h1')).textContent = 'Hello from the NSA!';
        center.appendChild(document.createElement('h2')).textContent = "Unfortunately this spyware is only compatible with A7 to A9. You're not on that device, so don't try it. At all. It will break something. Seriously. Forget we said anything.";
        body.appendChild(center);
        body.className = 'incompatible';

        window.ontouchmove  = undefined;
        window.ontouchend   = undefined;
        window.onmousemove  = undefined;
        window.onmouseup    = undefined;
        window.ontouchstart = function(e)
        {
            e.preventDefault();
            return false;
        };
    }
};
</script>
<!--mergestart-->
<script src="root/js/utils.js"></script>
<script src="root/js/version.js"></script>
<script src="root/js/slider.js"></script>
<script src="root/js/int64.js"></script>
<script src="root/js/spyware.js"></script>
<!--mergeend-->
<script src="root/js/pwn.js"></script>
<body style="background:#000;">
    <header class="block">
        <div class="time">TNS Sockport</div>
        <div class="date" id="date"></div>
    </header>
    <div id="main">
        <img id="logo" src="root/img/amazing.png" alt="logo">
        <div id="notice"></div>
    </div>
    <div id="slider">
        <div id="well">
            <div id="thumbtack">
                <img class="arrow" src="root/img/arrow.svg" alt="arrow">
            </div>
            <div id="hint">
                <span>slide for spyware</span>
            </div>
        </div>
    </div>
</body>
</html>
